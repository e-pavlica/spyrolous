.pure-g-r
  .pure-u-1-5.side
    #circle{class:"pure-button typeBtn"} circle
    %label Radius
    %input{type:"number", id:"circleRadius", class:"numInput", value:"50"}
    %br
    #rectangle{class:"pure-button typeBtn"} rectangle
    %label height
    %input{type:"number", id:"rectHeight", class:"numInput", value:"50"}
    %label width
    %input{type:"number", id:"rectWidth", class:"numInput", value:"50"}
    %hr
    #spyro{class:"pure-button typeBtn"} spyro
    %input{type:"number", id:"spyroRadiusLarge", class:"numInput", value:"100"}
    %input{type:"number", id:"spyroRadiusSmall", class:"numInput", value:"5"}
    %input{type:"number", id:"spyroRho", class:"numInput", value:"50"}
    %hr
    %h4 fill
    %i{class:"colorBtn fa fa-circle fa-2x red", id:"fillRed"}
    %i{class:"colorBtn fa fa-circle fa-2x blue", id:"fillBlue"}
    %i{class:"colorBtn fa fa-circle fa-2x green", id:"fillGreen"}
    %hr
    %h4 stroke
    %i{class:"colorBtn fa fa-circle-o fa-2x red", id:"strokeRed"}
    %i{class:"colorBtn fa fa-circle-o fa-2x blue", id:"strokeBlue"}
    %i{class:"colorBtn fa fa-circle-o fa-2x green", id:"strokeGreen"}
    %hr
    .layerContainer
      #newLayerBtn{class:"pure-button"} New Layer
      -@canvas.layers.each do |l|
        .layerThumb{layer_id:"#{l.id}"}
          =l.id
        %br


  .pure-u-4-5
    #snapContainer

<script>
:plain
  // set the canvas id for jQuery calls
  var canvas_id = "#{params[:id]}"
  //set the snap variables so they are available in the global scope
-@canvas.layers.each do |l|
  var l#{l.id};

$(document).ready(function() {

-@canvas.layers.each do |l|
  / each layer will get its own snap svg
  l#{l.id} = Snap(960,960);
  l#{l.id}.node.id = "l#{l.id}";
  / get live data back fro each layer
  subscribeToLayers(#{l.id});
  /draw circles to the canvas
  -l.circles.each do |c|
    :plain
      l#{l.id}.circle(#{c.x},#{c.y},#{c.radius});
      $('circle').last().attr('circle_id',"#{c.id}");
      $('circle').last().attr('layer_id',"#{l.id}");
  /draw rectangles to the canvas
  -l.rectangles.each do |r|
    :plain
      l#{l.id}.rect(#{r.x},#{r.y},#{r.width},#{r.height});
      $('rect').last().attr('layer_id',"#{l.id}");
      $('rect').last().attr('rect_id',"#{r.id}");
  / draw spyros to the canvas
  -l.spyros.each do |sp|
    :plain
      l#{l.id}.path("#{sp.path}");
      $('path').last().attr('layer_id',"#{l.id}");
      $('path').last().attr('spyro_id',"#{sp.id}");
  / load color attrs
  :plain
    l#{l.id}.attr({
      fill: "#{l.fill}",
      stroke: "#{l.stroke}",
      opacity: "#{l.opacity}"
    })
/ have to call these after svg objects have been loaded
$('svg').appendTo('#snapContainer');
initialize();
});
</script>